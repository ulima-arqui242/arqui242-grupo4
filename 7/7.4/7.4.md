# 7.4. Patrones de Asignación

## MULTI-TIER

### Visión general

El patrón Multi-Tier organiza la ejecución del software en un conjunto lógico de componentes agrupados en capas (tiers). Estas capas pueden estar organizadas según distintos criterios como el tipo de componentes tales como la presentacion del sistema, la logica de negocio y el acceso a los datos.

### Elementos

En cada tier vamos agrupar la logica de los componentes que tiene la base de datos mongodb y postgres como:

- Capa de Presentación (Frontend): Interfaz de usuario o clientes que interactúan con el sistema.
- Capa de Lógica de Negocio (Api Gateway): Contiene la lógica de negocio y las reglas del sistema.
- Capa de Persistencia de Datos (Base de Datos): Encargada de almacenar y recuperar los datos desde la base de datos (en este caso, MongoDB o cualquier otra base de datos).

### Relaciones

#### Comunicación entre capas:

- Los componentes dentro de una capa se comunican entre sí. Por ejemplo, la capa de presentación se comunica con la capa de lógica de negocio para enviar o recibir datos.
- Entre las capas, la comunicación suele ocurrir de manera jerárquica: la capa de presentación se comunica con la capa de lógica de negocio, y la capa de lógica de negocio se comunica con la capa de persistencia de datos.
- Las capas no suelen comunicarse directamente entre sí, sino que cada capa actúa como un intermediario. Esto permite que el sistema sea más modular y flexible.

#### Interacción entre sus componentes:

- La interacción entre los componentes de una capa es directa, es decir, un componente dentro de la capa de presentación interactúa con otro componente de la misma capa.
- Entre capas, la interacción es indirecta: la capa de presentación no interactúa directamente con la base de datos, sino que pasa a través de la capa de lógica de negocio.

### Restricciones

#### Componentes separados pertenecen solamente a una capa:

- Cada componente de software debe estar asignado a una única capa. Esto significa que no puedes tener un componente que sirva tanto a la capa de presentación como a la capa de lógica de negocio, por ejemplo. Cada componente tiene una responsabilidad bien definida dentro de la arquitectura. Por ejemplo, un componente de interfaz de usuario debe estar en la capa de presentación y no puede contener lógica de negocio o acceso a base de datos. Esto garantiza que las capas sean independientes.

### Debilidades

#### Incremento de complejidad:

- La separación en capas añade complejidad en términos de diseño y comunicación entre ellas. A medida que las capas aumentan, también lo hace la cantidad de interfaces que deben gestionarse y las interacciones que deben mantenerse consistentes. Además, el monitoreo, la seguridad y el manejo de errores se vuelven más complejos cuando se distribuyen en múltiples capas y plataformas, ya que cada capa debe ser gestionada de manera independiente.

### Fortalezas

- **Modularidad**: Al separar el sistema en capas, cada una de las cuales tiene responsabilidades específicas, el sistema es más fácil de entender, mantener y evolucionar. Los cambios en una capa no afectan directamente a las otras y facilita la implementación de nuevas funcionalidades o la modificación de las existentes.
  
- **Escalabilidad**: Las capas pueden escalarse de manera independiente. Por ejemplo, si la capa de persistencia requiere más recursos y se pueden agregar más instancias de base de datos sin afectar la capa de presentación o lógica de negocio.

- **Mantenimiento y Gestión**: La organización por capas facilita el mantenimiento y la gestión del sistema, ya que las responsabilidades de cada capa son claras y las interacciones entre ellas están bien definidas. Esto permite realizar diagnósticos y corregir problemas de manera más eficiente.

- **Seguridad**: Cada capa puede ser asegurada de forma independiente, lo que permite aplicar políticas de seguridad específicas para cada una. Por ejemplo, la capa de presentación puede tener medidas de seguridad orientadas a la protección de la interfaz de usuario, mientras que la capa de persistencia puede contar con mecanismos para proteger los datos almacenados.